!function(n){"use strict";var i=null;var r={delete:function(s){var a=".archive-delete-modal";return Modal.show(a,function(){document.querySelector(a+" .username").textContent=s.username}).then(function(){return new Promise(function(){var o=document.querySelector(a);o.addEventListener("click",function e(t){var n,i,r=t.target.classList;if(t.stopImmediatePropagation(),t.preventDefault(),r.contains("delete-archive")&&(i=(n=s).status,n.status="deleting",Request.deleteArchive(n.id).then(function(){Utils.sendEvent("RecordingsController:deleteArchive",{id:n.id})}).catch(function(){n.status=i})),r.contains("btn"))return o.removeEventListener("click",e),Modal.hide(a)})})})}};n.RecordingsController={init:function(e){var t=e?LazyLoader.dependencyLoad(["/js/models/firebase.js","/js/recordingsView.js"]).then(function(){return FirebaseModel.init()}):Promise.resolve();return t.then(function(e){i=e,Utils.sendEvent("recordings-model-ready",null,n),n.addEventListener("archive",function(e){var t=r[e.detail.action];t&&t(e.detail)}),e&&RecordingsView.init(i)})},get model(){return i}}}(this);