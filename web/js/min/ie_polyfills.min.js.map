{"version":3,"sources":["web/js/ie_polyfills.js"],"names":["global","String","prototype","startsWith","substr","this","indexOf","endsWith","searchString","position","subjectString","toString","isFinite","Math","floor","length","lastIndex","location","origin","loc","protocol","port","host","CustomEvent","_ieCustomEvent","eventName","initDict","evt","document","createEvent","detail","undefined","initCustomEvent","URL","_ieURL","str","parser","createElement","href","hostname","Error","replace","createObjectURL","revokeObjectURL","Array","find","predicate","TypeError","list","Object","thisArg","arguments","value","i","call","Intl","DateTimeFormat","locales","options","[object Object]","date","time","suffix","hours","getHours","hour12","hour","push","minutes","getMinutes","minute","join","WeakMap","defineProperty","counter","Date","now","name","random","key","entry","writable","hasValue","window"],"mappings":"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","sourcesContent":["/* eslint-disable no-extend-native */\n/* eslint-disable no-bitwise */\n\n// This file adds what we've detected that's missing in IE and we've used inadvertently. We've\n// tried to be as vanilla as possible (except for promises) but sometimes surprising things fall\n// between the cracks\n!(global => {\n  // String doesn't have startsWith\n  if (!String.prototype.startsWith) {\n    String.prototype.startsWith = function (substr) {\n      return this.indexOf(substr) === 0;\n    };\n  }\n\n  if (!String.prototype.endsWith) {\n    String.prototype.endsWith = function (searchString, position) {\n      const subjectString = this.toString();\n      if (typeof position !== 'number' || !isFinite(position) ||\n            Math.floor(position) !== position || position > subjectString.length) {\n        position = subjectString.length;\n      }\n      position -= searchString.length;\n      const lastIndex = subjectString.indexOf(searchString, position);\n      return lastIndex !== -1 && lastIndex === position;\n    };\n  }\n\n  // window.location.origin doesn't exist in IE...\n  if (global && global.location && !global.location.origin) {\n    // So we just create it:\n    const loc = global.location;\n    const protocol = loc.protocol;\n    let port = loc.port;\n    if (!port) {\n      port = protocol === 'https' ? 443 : 80;\n    }\n    global.location.origin = `${protocol}//${loc.host}:${port}`;\n  }\n\n  // And IE uses a curious way to init custom events... and to make things more\n  // interesting, CustomEvent exists also, only it's not a constructor.\n  // Note that this is total and completely *unsafe* to do if you're using\n  // external libraries that depend on CustomEvent in IE being what it is!\n  if (typeof global.CustomEvent !== 'function') {\n    global._ieCustomEvent = global.CustomEvent;\n    global.CustomEvent = (eventName, initDict) => {\n      const evt = document.createEvent('CustomEvent');\n      const detail = (initDict && initDict.detail) || undefined;\n      evt.initCustomEvent(eventName, true, true, detail);\n      return evt;\n    };\n  }\n\n  if (typeof global.URL !== 'function') {\n    global._ieURL = global.URL;\n    global.URL = function (str) {\n      const parser = document.createElement('a');\n      parser.href = str;\n      if (!parser.hostname) {\n        throw new Error('URL is not valid');\n      }\n      this.origin = `${parser.protocol}//${parser.host}`;\n      const port = parser.protocol === 'https' ? 443 : 80;\n      if (this.origin.endsWith(`:${port}`)) {\n        this.origin = this.origin.replace(`:${port}`, '');\n      }\n    };\n    global.URL.createObjectURL = global._ieURL.createObjectURL;\n    global.URL.revokeObjectURL = global._ieURL.revokeObjectURL;\n  }\n\n  if (!Array.prototype.find) {\n    Array.prototype.find = function (predicate) {\n      if (this === null) {\n        throw new TypeError('Array.prototype.find called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      const list = Object(this);\n      const length = list.length >>> 0;\n      const thisArg = arguments[1];\n      let value;\n\n      for (let i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return value;\n        }\n      }\n      return undefined;\n    };\n  }\n\n  if (!global.Intl) {\n    global.Intl = {\n      DateTimeFormat(locales, options) {\n        return {\n          format(date) {\n            const time = [];\n            let suffix = '';\n\n            let hours = date.getHours();\n            if (options.hour12) {\n              if (hours > 12) {\n                suffix = ' PM';\n                hours -= 12;\n              } else {\n                suffix = ' AM';\n              }\n            }\n\n            if (options.hour === '2-digit' && hours < 10) {\n              time.push('0');\n            }\n\n            time.push(hours);\n            time.push(':');\n\n            const minutes = date.getMinutes();\n            if (options.minute === '2-digit' && minutes < 10) {\n              time.push('0');\n            }\n\n            time.push(minutes);\n            time.push(suffix);\n\n            return time.join('');\n          }\n        };\n      }\n    };\n  }\n\n  if (typeof WeakMap === 'undefined') {\n    (() => {\n      const defineProperty = Object.defineProperty;\n      let counter = Date.now() % 1e9;\n\n      const WeakMap = function () {\n        this.name = `__st${Math.random() * 1e9 >>> 0}${counter++}__`;\n      };\n\n      WeakMap.prototype = {\n        set(key, value) {\n          const entry = key[this.name];\n          if (entry && entry[0] === key) {\n            entry[1] = value;\n          } else {\n            defineProperty(key, this.name, { value: [key, value], writable: true });\n          }\n          return this;\n        },\n        get(key) {\n          const entry = key[this.name];\n          if (entry && entry[0] === key) {\n            return entry[1];\n          }\n          return undefined;\n        },\n        delete(key) {\n          const entry = key[this.name];\n          if (!entry) return false;\n          const hasValue = entry[0] === key;\n          entry[0] = entry[1] = undefined;\n          return hasValue;\n        },\n        has(key) {\n          const entry = key[this.name];\n          if (!entry) return false;\n          return entry[0] === key;\n        }\n      };\n\n      window.WeakMap = WeakMap;\n    })();\n  }\n})(this);\n"]}