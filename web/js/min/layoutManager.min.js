!function(n){"use strict";var a,o=null,r=null,i=null,l={},u="hangout_vertical";function s(t){return Object.getPrototypeOf(r)===t.prototype}var c={layout:function(t){o=t.detail.type,v()},itemSelected:function(t){g()&&s(Grid)&&(o=u,v(t.detail.item))},emptyStage:function(){o="grid",v()}};function d(){return Object.keys(l).length}var y={float:!0,f2f_horizontal:!0,f2f_vertical:!0},f={grid:!0,hangout_horizontal:!0,hangout_vertical:!0};function g(){return 2<d()}function v(t){var e=2<d()?f[o]?a[o]:Grid:y[o]?a[o]:Float;r&&s(e)||(r&&r.destroy(),r=new e(i,l,t),Utils.sendEvent("layoutManager:layoutChanged")),r.rearrange(),Utils.sendEvent("layoutManager:availableLayouts",{layouts:g()?f:y})}n.LayoutManager={init:function(t,e){return a={grid:Grid,float:Float,f2f_horizontal:F2FHorizontal,f2f_vertical:F2FVertical,hangout_horizontal:HangoutHorizontal,hangout_vertical:HangoutVertical},i=document.querySelector(t),LayoutView.init(i),ItemsHandler.init(i,l),Utils.addEventsHandlers("layoutMenuView:",c,n),Utils.addEventsHandlers("layoutView:",c,n),Utils.addEventsHandlers("hangout:",c,n),e?LazyLoader.load(["/js/layoutViewport.js","/css/hangoutScroll.css"]).then(function(){LayoutViewport.init(i.querySelector(".tc-list ul"),".stream")}):Promise.resolve()},append:function(t,e){var n,a=LayoutView.append(t,e);return l[t]=a,n=a,Utils.isScreen(n)&&g()&&!s(HangoutHorizontal)&&!s(HangoutVertical)?(o=u,v(a)):v(),Utils.sendEvent("layoutManager:itemAdded",{item:a}),a.querySelector(".opentok-stream-container")},remove:function(t){var e=l[t];e&&(LayoutView.remove(e),delete l[t],Utils.sendEvent("layoutManager:itemDeleted",{item:e}),v())},removeAll:function(){LayoutView.removeAll()},getItemById:function(t){return l[t]}}}(this);